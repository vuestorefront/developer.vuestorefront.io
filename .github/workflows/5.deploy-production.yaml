name: Deploy - Production

on:
  push:
    branches:
      - main

permissions:
  contents: read
  deployments: write
concurrency:
  group: 'deploy-${{ github.workflow }}-${{ github.head_ref || github.run_id }}-${{ github.ref }}'
  cancel-in-progress: true
jobs:
  deploy:
    if: github.ref == 'refs/heads/main'
    uses: ./.github/workflows/base-deploy.yaml
    with:
      ENVIRONMENT: 'production'
      SHA: '${{ github.sha }}'
    secrets: inherit
